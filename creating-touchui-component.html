Create an AEM 6 Touch UI component

After you setup the AEM folder structure, create the AEM Touch UI component. Perform these tasks using CRXDE Lite:

1. Right click on /apps/mywebsite2/components and then select New, Component.

2. Enter the following information into the Create Component dialog box:

Label: The name of the component to create. Enter herotext2.
Title: The title that is assigned to the component. Enter herotext2.
Description: The description that is assigned to the template. Enter herotext2.
Super Resource Type: Enter foundation/components/parbase.
Group: The group in the side kick where the component appears. Enter General. (The herotext2 component is located under the General heading in the Tocuh UI side rail. Also appears in General in the classic view sidekick.)
Allowed parents: Enter */*parsys.
3. Click Ok.

To the top
Add a dialog to the AEM Touch UI component  

A dialog lets an author click on the component in the Touch UI (or Classic UI) view during design time and enter values that are used by the component. The component created in this development article lets the AEM author enter text values, which are then displayed in the AEM web page. (See the illustration shown at the beginning of this development article.)

A dialog that is built for the Touch UI is defined by using nodes of type un:structured. You define the type of control on the Touch UI dialog by setting the node's sling:resourceType property. For example, to define a text field on a Touch UI dialog, set the  sling:resourceType property to granite/ui/components/foundation/form/textfield.

The following table lists the sling:resourceType values that are used to create the component in this development article.

Sling:resourceType	Description
granite/ui/components/foundation/container	Defines a container for the dialog
granite/ui/components/foundation/layouts/tabs	Defines a tab that is used in the dialog
granite/ui/components/foundation/section	Defines a section within a tab. 
granite/ui/components/foundation/layouts/fixedcolumns	Defines fixed columns. 
granite/ui/components/foundation/form/textfield	Defines a text field that lets authors enter data.
granite/ui/components/foundation/form/textarea	Defines a text area field that lets author more data than a text field. 
<options
    jcr:primaryType="nt:unstructured"
    sling:resourceType="granite/ui/components/foundation/form/multifield"
    fieldLabel="Options">
    <field
        jcr:primaryType="nt:unstructured"
        sling:resourceType="granite/ui/components/foundation/form/textfield"
        name="./options" />
</options>
Note:
When building a dialog for the Touch UI view, you define the type of control (for example, a text field) by setting the sling:resourceType property. In contrast, when building a dialog for the classic view, you define the type of control by setting its xtype property. You set both properties in the following sections. For a listing of all Granite objects, see Granite Reference.

The following illustration shows the JCR nodes of the component created in this development article. 


JCR nodes that represent the dialog for the AEM 6 Touch UI component
As you can see in the previous illustration, there are two JCR branches that are related to the component's dialog:

/apps/mywebsite2/components/herotext2/cq:dialog
/apps/mywebsite2/components/herotext2/dialog
Both of these dialogs are required when developing an AEM component. The first branch defines the component's dialog used in the Touch UI environment. The second branch defines the component's dialog used in the AEM classic view. Therefore to use the component in both AEM views, you need to create both JCR node branches.  
 
Build the dialog for the Touch UI view
Perform these tasks:

1. Select /apps/mywebsite2/components/herotext2.

2. Right click and select Create, Create Node.

3. Enter the following values:

Name: cq:dialog
Type: nt:unstructured
4. Add the following properties to the cq:dialog node.

 

Name	Type	Value	Description
helppath	String	en/cq/current/wcm/
default_components.html#Carousel	Specifies the location of the help content. (see the help button on the top of the Touch UI dialog shown at the start of this article)
jcr:title
String
Hero Text
Specifies the title displayed in the dialog. (see the illustration at the start of this article)
sling:resourceType
String
cq/gui/components/authoring/dialog
Specifies the type of node. In this example, the type is a dialog.
5. Click on the following node: /apps/mywebsite2/components/herotext2/cq:dialog.

6. Right click and select Create, Create Node. Enter the following values:

Name: content
Type: nt:unstructured
7. Add the following property to the content node.
Name	Type	Value	Description
sling:resourceType	String	granite/ui/components/foundation/container	Defines the type
8. Click on the following node: /apps/mywebsite2/components/herotext2/cq:dialog/content.

9. Right click and select Create, Create Node. Enter the following values:

Name: layout
Type: nt:unstructured
10. Add the following properties to the layout node.
Name	Type	Value	Description
sling:resourceType	String	granite/ui/components/foundation/
layouts/tabs
Defines the type
type	String	nav	defines tab functionality
11. Click on the following node: /apps/mywebsite2/components/herotext2/cq:dialog/content.

12. Right click and select Create, Create Node. Enter the following values:

Name: items
Type: nt:unstructured
13. Click on the following node: /apps/mywebsite2/components/herotext2/cq:dialog/content/items.

14. Right click and select Create, Create Node. Enter the following values:

Name: herotext
Type: nt:unstructured
15. Add the following properties to the herotext node (this node represents the tab).
Name	Type	Value	Description
jcr:title	String	Hero Text Properties	The value displayed on the tab of the Touch UI dialog (see the illustration at the start of this article)
sling:resourceType	String	granite/ui/components/
foundation/section	Defines the tab functionality
16. Click on the following node: /apps/mywebsite2/components/herotext2/cq:dialog/content/items/herotext.

17. Right click and select Create, Create Node. Enter the following values:

Name: layout
Type: nt:unstructured
18. Add the following property to the layout node.

Name	Type	Value	Description
sling:resourceType	String	granite/ui/components/foundation/
layouts/fixedcolumns	defines the type of sling resource
19. Click on the following node: /apps/mywebsite2/components/herotext2/cq:dialog/content/items/herotext.

20. Right click and select Create, Create Node. Enter the following values:

Name: items
Type: nt:unstructured
21. Click on the following node: /apps/mywebsite2/components/herotext2/cq:dialog/content/items/herotext/items.

22. Right click and select Create, Create Node. Enter the following values:

Name: column
Type: nt:unstructured
23. Click on the following node: /apps/mywebsite2/components/herotext2/cq:dialog/content/items/herotext/items/column.

24. Add the following property to the columns node. 

Name	Type	Value	Description
sling:resourceType	String	granite/ui/components/foundation/container	defines the type of sling resource
25. Click on the following node: /apps/mywebsite2/components/herotext2/cq:dialog/content/items/herotext/items/column.

26. Right click and select Create, Create Node. Enter the following values:

Name: items
Type: nt:unstructured
27. Click on the following node: /apps/mywebsite2/components/herotext2/cq:dialog/content/items/herotext/items/column/items.

28. Right click and select Create, Create Node. Enter the following values:

Name:headingText
Type: nt:unstructured
29. Click on the following node: /apps/mywebsite2/components/herotext2/cq:dialog/content/items/herotext/items/
column/items/headingText.

30. Add the following properties to the headingText node (this node represents the Heading Text input control on the dialog. See the illustration at the start of this article.)

Name	Type	Value	Description
fieldLabel	Value	Heading Text	Defines the label associated with the input control
name	String	./jcr:Heading	Defines the name of the control. You reference this value in the component's code.
sling:resourceType	String	granite/ui/components/
foundation/form/textfield	Defines the control as a text field. 
31. Click on the following node: /apps/mywebsite2/components/herotext2/cq:dialog/content/items/herotext/items/column/items.

32. Right click and select Create, Create Node. Enter the following values:

Name:description
Type: nt:unstructured
33. Click on the following node: /apps/mywebsite2/components/herotext2/cq:dialog/content/items/herotext/
items/column/items/description.

34. Add the following property to the description node (this node represents the Description input control on the dialog. See the illustration at the start of this article.)

Name	Type	Value	Description
fieldLabel	Value	Description
Defines the label associated with the input control
name	String	./jcr:description
Defines the name of the control. You reference this value in the component's code.
sling:resourceType	String	granite/ui/components/foundation
/form/textarea
Defines the control as a text area. 
